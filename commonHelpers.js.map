{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["//імпортування бібліотек\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n//створення змінних для елементів DOM для відображення днів, годин, хвилин та секунд таймера\nlet userSelectedDate;\nconst buttonStart = document.querySelector('[data-start]');\nconst daysCount = document.querySelector('[data-days]');\nconst hoursCount = document.querySelector('[data-hours]');\nconst minutesCount = document.querySelector('[data-minutes]');\nconst secondsCount = document.querySelector('[data-seconds]');\n\n//функція, яка додає перед значенням нуль, якщо воно менше 10\nfunction addLeadingZero(value) {\n    return value < 10 ? `0${value}` : value;\n}\n\n// функція для скидання таймера\nfunction resetTime() {\n    clearInterval(timerInterval);\n    daysCount.textContent = '00';\n    hoursCount.textContent = '00';\n    minutesCount.textContent = '00';\n    secondsCount.textContent = '00';\n    userSelectedDate = undefined;\n    buttonStart.removeAttribute('disabled');\n}\n\n//налаштування параметрів 'flatpickr'\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n     minuteIncrement: 1,\n    onClose(selectedDates) {\n        if (selectedDates && selectedDates[0]) {\n            userSelectedDate = selectedDates[0];\n    \n            console.log(selectedDates[0]);\n      \n            if (userSelectedDate.getTime() > Date.now()) {\n                buttonStart.removeAttribute('disabled');\n            } else {\n                iziToast.error({\n                    title: 'Error',\n                    message: 'Please choose a date in the future'\n                });\n                buttonStart.setAttribute('disabled', 'true');\n            }\n        } else {\n            console.error('User date is not defined');\n            userSelectedDate = undefined;\n        }\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\n// обробник подій кнопки\nbuttonStart.addEventListener('click', () => {\n    if (!userSelectedDate) {\n        console.error('User date is not defined');\n        return;\n    }\n\n    const timeMinus = userSelectedDate.getTime() - Date.now();\n\n    if (timeMinus <= 0) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please choose a date in the future',\n        });\n        return;\n    }\n\n    startCountdown(timeMinus);\n    buttonStart.setAttribute('disabled', 'true');\n});\n\n\n// функція, яка запускає зворотній відлік часу з інтервалом в 1 сек.\n   let timerInterval;\nfunction startCountdown(time) {\n    const interval = 1000;\n\n    function updateTimer() {\n        const { days, hours, minutes, seconds } = convertMs(time);\n\n        daysCount.textContent = addLeadingZero(days);\n        hoursCount.textContent = addLeadingZero(hours);\n        minutesCount.textContent = addLeadingZero(minutes);\n        secondsCount.textContent = addLeadingZero(seconds);\n\n        time -= interval;\n\n        if (time < 0) {\n            clearInterval(timerInterval);\n            iziToast.success({\n                title: 'Success',\n                message: 'Countdown completed',\n            });\n        }\n    }\n\n    timerInterval = setInterval(updateTimer, interval);\n}\n\n/*\nфункція, яка конвертує час в мілісекундах у об'єкт, що містить к-сть днів, годин, хвилин та секунд до обраної дати\n*/\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n// скидання таймера при завантаженні сторінки\ndocument.addEventListener('DOMContentLoaded', function () {\n    resetTime();\n});\n\n\n\n\n"],"names":["userSelectedDate","buttonStart","daysCount","hoursCount","minutesCount","secondsCount","addLeadingZero","value","resetTime","timerInterval","options","selectedDates","iziToast","flatpickr","timeMinus","startCountdown","time","updateTimer","days","hours","minutes","seconds","convertMs","ms"],"mappings":"+IAQA,IAAIA,EACJ,MAAMC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EAG5D,SAASC,EAAeC,EAAO,CAC3B,OAAOA,EAAQ,GAAK,IAAIA,CAAK,GAAKA,CACtC,CAGA,SAASC,GAAY,CACjB,cAAcC,CAAa,EAC3BP,EAAU,YAAc,KACxBC,EAAW,YAAc,KACzBC,EAAa,YAAc,KAC3BC,EAAa,YAAc,KAC3BL,EAAmB,OACnBC,EAAY,gBAAgB,UAAU,CAC1C,CAGA,MAAMS,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KAChB,gBAAiB,EAClB,QAAQC,EAAe,CACfA,GAAiBA,EAAc,CAAC,GAChCX,EAAmBW,EAAc,CAAC,EAElC,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAExBX,EAAiB,QAAO,EAAK,KAAK,IAAG,EACrCC,EAAY,gBAAgB,UAAU,GAEtCW,EAAS,MAAM,CACX,MAAO,QACP,QAAS,oCAC7B,CAAiB,EACDX,EAAY,aAAa,WAAY,MAAM,KAG/C,QAAQ,MAAM,0BAA0B,EACxCD,EAAmB,OAE5B,CACH,EAEAa,EAAU,mBAAoBH,CAAO,EAGrCT,EAAY,iBAAiB,QAAS,IAAM,CACxC,GAAI,CAACD,EAAkB,CACnB,QAAQ,MAAM,0BAA0B,EACxC,MACH,CAED,MAAMc,EAAYd,EAAiB,QAAS,EAAG,KAAK,IAAG,EAEvD,GAAIc,GAAa,EAAG,CAChBF,EAAS,MAAM,CACX,MAAO,QACP,QAAS,oCACrB,CAAS,EACD,MACH,CAEDG,EAAeD,CAAS,EACxBb,EAAY,aAAa,WAAY,MAAM,CAC/C,CAAC,EAIE,IAAIQ,EACP,SAASM,EAAeC,EAAM,CAG1B,SAASC,GAAc,CACnB,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUN,CAAI,EAExDd,EAAU,YAAcI,EAAeY,CAAI,EAC3Cf,EAAW,YAAcG,EAAea,CAAK,EAC7Cf,EAAa,YAAcE,EAAec,CAAO,EACjDf,EAAa,YAAcC,EAAee,CAAO,EAEjDL,GAAQ,IAEJA,EAAO,IACP,cAAcP,CAAa,EAC3BG,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,qBACzB,CAAa,EAER,CAEDH,EAAgB,YAAYQ,EAAa,GAAQ,CACrD,CAKA,SAASK,EAAUC,EAAI,CAQrB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAE1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EAEpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EAEjDF,EAAU,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAGA,SAAS,iBAAiB,mBAAoB,UAAY,CACtDb,GACJ,CAAC"}